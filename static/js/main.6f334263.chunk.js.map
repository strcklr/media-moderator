{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","fileInputRef","useRef","useState","haveFile","setHaveFile","uploadText","setUploadText","file","setFile","filename","setFileName","VIDEO_URL","validateYTUrl","url","test","handleFileUpload","files","name","removeFile","processFile","console","log","processURL","a","require","fork","document","getElementById","value","videoId","split","match","fetch","then","res","text","qsToJson","queryString","keyValuePair","key","params","i","decodeURIComponent","className","id","type","placeholder","onClick","getURLInput","FileDrop","onTargetClick","current","click","onFrameDragEnter","event","onFrameDragLeave","onFrameDrop","onDragOver","onDragLeave","onDrop","onChange","target","ref","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.6f334263.chunk.js","sourcesContent":["import React, { useRef, useState } from 'react';\nimport './App.css';\nimport ytdl from 'react-native-ytdl';\nimport { HiUpload } from 'react-icons/hi';\nimport { TiDelete } from 'react-icons/ti';\nimport { FaPlay } from 'react-icons/fa';\nimport { FileDrop } from 'react-file-drop';\n\nfunction App () {\n  const fileInputRef = useRef(null);\n  const onTargetClick = () => {\n    if (!haveFile) {\n      fileInputRef.current.click();\n    }\n  }\n  const [haveFile, setHaveFile] = useState(false);\n  const [uploadText, setUploadText] =  useState(\"Drag and drop a file to be scanned. Click to browse.\");\n  const [file, setFile] = useState(null);\n  const [filename, setFileName] = useState(\"unknown.mp4\");\n\n  const VIDEO_URL = \"http://localhost:8082/get-video-info?video_id=\";\n  const validateYTUrl = url => /^(?:https?:\\/\\/)?(w{3})?\\.?youtube\\.com/.test(url);\n\n\n  var handleFileUpload = (files) => {\n    setFile(files[0]);\n    setFileName(files[0].name);\n    setUploadText(\"Ready to process file: \" + files[0].name);\n    setHaveFile(true);\n  }\n\n  var removeFile = () => {\n    setHaveFile(false);\n    setFile(null);\n    setFileName(\"unknown.mp4\");\n    setUploadText(\"Drag and drop a file to be scanned. Click to browse.\");\n  }\n\n  var processFile = () => {\n    // TODO pass the file off to the model to be predicted\n    console.log(file);\n  }\n\n  async function processURL () {\n    const server = require('child_process').fork('./start_server.sh');\n    const url = document.getElementById('url').value;\n    if (validateYTUrl(url)) {\n      /* Process YouTube URL */\n      const videoId = url.split(\"?\")[1].match(/v=([^&]+)/)[1];\n      return fetch(VIDEO_URL + videoId)\n        .then(res => res.text())\n        .then(res => {\n          return qsToJson(res);\n        });\n    }\n  }\n\n  function qsToJson(queryString) {\n    let res = {};\n    let params = queryString.split(\"&\");\n    let keyValuePair, key, value;\n    for (let i in params) {\n      keyValuePair = params[i].split(\"=\");\n      key = keyValuePair[0];\n      value = keyValuePair[1];\n      res[key] = decodeURIComponent(value);\n    }\n    return res;\n  }\n\n  var onFileInputChange = (event) => {\n    const { files } = event.target;\n    handleFileUpload(files);\n  }\n\n  function getUploadIcon() {\n    if (!haveFile) {\n      return <HiUpload className='upload'/>\n    } else {\n      return <div className=\"inlineButtons\">\n        <button className=\"btn\" id=\"removeBtn\" onClick={removeFile}><span className=\"filename\">{filename}</span> <TiDelete className=\"btnIcon\"/></button>\n        <button className=\"btn\" id=\"run\" onClick={processFile}>RUN<FaPlay className=\"btnIcon\"/></button>\n      </div>\n    }\n  }\n\n  function getURLInput() {\n    if (!haveFile) {\n      return <div className=\"inlineButtons\">\n        <input className=\"input\" id=\"url\" type=\"url\" placeholder=\"Paste a URL (ex: https://youtube.com/...)\" onClick={console.log(\"click\")}></input>\n        <button className=\"btn\" id=\"run\" onClick={processURL}>RUN<FaPlay className=\"btnIcon\"/></button>\n\n      </div>\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"banner\">\n        <h1 id='title'>Media Moderator</h1>\n        <h4 id='subtitle'>Upload an mp4 to be scrubbed</h4>\n        {getURLInput()}\n        <div className=\"fileDrop\">\n          <FileDrop\n            onTargetClick={onTargetClick}\n            onFrameDragEnter={(event) => console.log('onFrameDragEnter', event)}\n            onFrameDragLeave={(event) => console.log('onFrameDragLeave', event)}\n            onFrameDrop={(event) => console.log('onFrameDrop', event)}\n            onDragOver={(event) => console.log('onDragOver', event)}\n            onDragLeave={(event) => console.log('onDragLeave', event)}\n            onDrop={(files, event) => {\n              console.log('onDrop!', files, event);\n              console.log(files);\n              handleFileUpload(files);\n            }}>      \n            {getUploadIcon()}\n            <p id=\"fileDropInstruction\">{uploadText}</p>\n            <input\n              onChange={onFileInputChange}\n              ref={fileInputRef}\n              type=\"file\"\n              className=\"hidden\"\n            />      \n          </FileDrop>\n        </div>\n      </header>\n    </div>\n  );\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}